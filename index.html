<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hydro Dye Generator</title>
<style>
    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background: #0a0f1a;
        color: #e8f0ff;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }

    .container {
        background: rgba(0, 20, 40, 0.8);
        padding: 30px;
        border-radius: 20px;
        width: 90%;
        max-width: 850px;
        box-shadow: 0 0 25px rgba(0, 140, 255, 0.4);
        backdrop-filter: blur(8px);
    }

    h1 {
        text-align: center;
        margin-bottom: 25px;
        color: #6ac6ff;
        text-shadow: 0 0 8px #009dff;
    }

    .picker-section {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .color-preview {
        width: 120px;
        height: 120px;
        border-radius: 12px;
        border: 2px solid #6ac6ff;
        box-shadow: 0 0 12px rgba(0, 140, 255, 0.6);
    }

    .field-group {
        margin-top: 15px;
    }

    textarea {
        width: 100%;
        height: 220px;
        background: #07111d;
        color: #b9dcff;
        border: 2px solid #005c99;
        border-radius: 12px;
        padding: 12px;
        font-family: monospace;
        resize: vertical;
        box-shadow: 0 0 8px rgba(0, 140, 255, 0.3);
    }

    input, select {
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        border: 2px solid #005c99;
        background: #07111d;
        color: #b9dcff;
        margin-top: 5px;
        box-shadow: 0 0 8px rgba(0, 140, 255, 0.3);
    }

    button {
        width: 100%;
        padding: 14px;
        margin-top: 20px;
        border: none;
        border-radius: 14px;
        background: linear-gradient(90deg, #009dff, #00c6ff);
        color: #00121e;
        font-size: 1.1rem;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 0 16px rgba(0, 140, 255, 0.6);
        transition: 0.2s;
    }

    button:hover {
        transform: scale(1.02);
        box-shadow: 0 0 25px rgba(0, 180, 255, 1);
    }
</style>
</head>
<body>
<div class="container">
    <h1>Hydro Dye Generator</h1>

    <div class="picker-section">
        <div>
            <label>Pick Color:</label>
            <input type="color" id="colorPicker" />
        </div>
        <div>
            <label>R, G, B</label>
            <input type="number" id="rVal" min="0" max="255" placeholder="R" />
            <input type="number" id="gVal" min="0" max="255" placeholder="G" />
            <input type="number" id="bVal" min="0" max="255" placeholder="B" />
        </div>
        <div class="color-preview" id="preview"></div>
    </div>

    <div class="field-group">
        <label>Dye Name (Auto or Custom)</label>
        <input type="text" id="dyeName" placeholder="Example: modDyeSkyBlue" />
    </div>

    <div class="field-group">
        <label>Paint Needed to Craft Dye</label>
        <input type="number" id="recipeCount" value="10" min="1" />
    </div>

    <button onclick="generateXML()">Generate XML</button>

    <div class="field-group">
        <textarea id="output"></textarea>
    </div>
</div>

<script>
function toHex(n) {
    return n.toString(16).padStart(2, '0');
}

function autoName(r, g, b) {
    const names = ["Crimson", "Cobalt", "Amber", "Viridian", "Nimbus", "Glacial", "Volt", "Abyss", "Coral", "Spectral", "Solar", "Mystic", "HydroBlue"];
    const base = names[Math.floor(Math.random() * names.length)];
    return `modDye${base}`;
}

const picker = document.getElementById("colorPicker");
const rIn = document.getElementById("rVal");
const gIn = document.getElementById("gVal");
const bIn = document.getElementById("bVal");
const preview = document.getElementById("preview");

picker.addEventListener("input", e => {
    let hex = e.target.value;
    let r = parseInt(hex.substr(1, 2), 16);
    let g = parseInt(hex.substr(3, 2), 16);
    let b = parseInt(hex.substr(5, 2), 16);
    rIn.value = r;
    gIn.value = g;
    bIn.value = b;
    preview.style.background = `rgb(${r}, ${g}, ${b})`;
});

[rIn, gIn, bIn].forEach(inp => inp.addEventListener("input", () => {
    let r = parseInt(rIn.value) || 0;
    let g = parseInt(gIn.value) || 0;
    let b = parseInt(bIn.value) || 0;
    preview.style.background = `rgb(${r}, ${g}, ${b})`;
    picker.value = `#${toHex(r)}${toHex(g)}${toHex(b)}`;
}));

function generateXML() {
    let r = rIn.value || 0;
    let g = gIn.value || 0;
    let b = bIn.value || 0;

    let name = document.getElementById("dyeName").value.trim();
    if (!name) name = autoName(r, g, b);

    let count = document.getElementById("recipeCount").value;

    const xml = `    <item_modifier name="${name}" installable_tags="clothing,armor,weapon,tool,vehicle,drone" modifier_tags="dye" type="attachment" cosmetic_install_chance=".16">
        <property name="Extends" value="modGeneralMaster"/>
        <property name="DescriptionKey" value="modDyeGroupDesc"/>
        <property name="CustomIcon" value="modDyeWhite"/>
        <property name="CustomIconTint" value="${r}, ${g}, ${b}"/>
        <property name="Material" value="Mpaint"/>
        <property name="Weight" value="20"/>
        <property name="EconomicValue" value="50"/>
        <property name="SoundPickup" value="dye_grab"/>
        <property name="SoundPlace" value="dye_place"/>
        <item_property_overrides name="*">
            <property name="TintColor" value="${r}, ${g}, ${b}"/>
            <property name="CustomIconTint" value="${r}, ${g}, ${b}"/>
        </item_property_overrides>
    </item_modifier>

    <recipe name="${name}" count="1">
        <ingredient name="resourcePaint" count="${count}" />
    </recipe>`;

    document.getElementById("output").value = xml;
}
</script>
</body>
</html>
